# PR 코드 리뷰 규칙

PR 리뷰 시 아래 규칙을 따릅니다.

## 토큰 효율 원칙

- **TodoWrite 사용 금지**: CI 환경에서 불필요한 턴 소모를 방지
- **병렬 도구 호출 필수**: 독립적인 도구 호출(파일 읽기, 인라인 코멘트 작성 등)은 반드시 한 턴에 병렬로 실행
- **불필요한 파일 읽기 금지**: diff를 먼저 확인하고, 변경된 파일 유형에 해당하는 스킬만 참조 (예: 테스트 파일이 없으면 테스트 스킬 읽지 않음)

## 리뷰 범위

- 변경된 파일만 리뷰
- 제외 대상: pnpm-lock.yaml, \*.d.ts (자동생성), 이미지/폰트 바이너리, .github/ 설정 파일

## 코멘트 제한

- 인라인 코멘트는 **최대 10개**로 제한
- **🔴 CRITICAL 우선**: 버그, 타입 안전성, 보안 이슈를 먼저 코멘트
- **🟡 WARNING은 CRITICAL이 10개 미만일 때만** 남은 슬롯에 포함
- 10개를 초과하는 이슈가 있을 경우, 심각도가 높은 순서로 선별

## 리뷰 실행 순서

1. `gh pr diff`와 `gh pr view`를 **병렬로** 호출하여 변경사항 파악
2. 변경된 파일 유형에 따라 필요한 `SKILL.md`만 **병렬로** 읽기
   2-1. 테스트 파일 `*.test.*`이 없으면 테스트 스킬은 읽지 않음
3. 필요한 `rules/` 개별 파일을 **병렬로** 읽기
4. 모든 인라인 코멘트를 **병렬로** 작성 (한 턴에 최대한 묶어서 호출)

## 리뷰 카테고리

3개의 카테고리로 구분하여 리뷰. 각 카테고리의 상세 규칙은 해당 스킬 파일을 참조.

## 규칙 참조 절차

1. 각 스킬의 `SKILL.md`를 먼저 읽고 해당되는 규칙을 파악
2. 해당 규칙의 `rules/` 개별 파일만 선택적으로 참조
3. `AGENTS.md`는 읽지 않음

### [코드 품질]

- **스킬**: `.agents/skills/petfriends-coding-guide/SKILL.md` 참조

### [성능]

- **스킬**: `.agents/skills/vercel-react-best-practices/SKILL.md` 참조
- **주의**: petfriends-coding-guide의 가독성 원칙과 충돌 시 가독성을 우선합니다

### [테스트 품질]

- **스킬**: `.agents/skills/petfriends-test-conventions/SKILL.md` 참조
- **조건**: 변경된 파일에 테스트 파일(`*.test.*`)이 포함된 경우에만 적용
